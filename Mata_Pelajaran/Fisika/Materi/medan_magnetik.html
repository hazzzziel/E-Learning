<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medan Magnetik di Sekitar Arus Listrik - Fisika Kelas 12</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #f4f6f9;
            --bg-secondary: #e8ecf2;
            --bg-card: #ffffff;
            --fg-primary: #0f1419;
            --fg-secondary: #3a4553;
            --fg-muted: #6b7c8f;
            --accent-primary: #0d9488;
            --accent-primary-light: #14b8a6;
            --accent-primary-dark: #0f766e;
            --accent-glow: rgba(13, 148, 136, 0.15);
            --accent-secondary: #6366f1;
            --accent-success: #059669;
            --accent-warning: #d97706;
            --accent-error: #dc2626;
            --shadow-soft: 0 2px 12px rgba(15, 20, 25, 0.04);
            --shadow-medium: 0 8px 32px rgba(15, 20, 25, 0.08);
            --shadow-hover: 0 12px 40px rgba(13, 148, 136, 0.12);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 18px;
            --radius-xl: 24px;
            --transition-fast: 0.15s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-medium: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html { scroll-behavior: smooth; }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: var(--bg-primary);
            color: var(--fg-primary);
            line-height: 1.65;
            min-height: 100vh;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: 
                radial-gradient(ellipse at 0% 0%, rgba(13, 148, 136, 0.04) 0%, transparent 50%),
                radial-gradient(ellipse at 100% 100%, rgba(99, 102, 241, 0.04) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        h1, h2, h3, h4 {
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 700;
            line-height: 1.3;
            letter-spacing: -0.02em;
        }

        .navbar {
            position: sticky;
            top: 0;
            background: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-bottom: 1px solid rgba(13, 148, 136, 0.08);
            z-index: 1000;
            padding: 0 24px;
        }

        .navbar-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 64px;
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }

        .navbar-logo {
            width: 38px;
            height: 38px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .navbar-logo svg { width: 20px; height: 20px; color: white; }

        .navbar-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            color: var(--fg-primary);
        }

        .navbar-title span { color: var(--accent-primary); }

        .btn-nav {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            font-family: inherit;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--fg-secondary);
            background: var(--bg-secondary);
            border: 1px solid transparent;
            border-radius: var(--radius-sm);
            text-decoration: none;
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .btn-nav:hover {
            background: var(--accent-primary);
            color: white;
            transform: translateX(-3px);
        }

        .btn-nav svg { width: 16px; height: 16px; }

        .hero {
            padding: 40px 24px 32px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85rem;
            color: var(--fg-muted);
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .breadcrumb a {
            color: var(--accent-primary);
            text-decoration: none;
            transition: var(--transition-fast);
        }

        .breadcrumb a:hover { text-decoration: underline; }

        .breadcrumb svg { width: 14px; height: 14px; opacity: 0.4; }

        .hero-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 24px;
            flex-wrap: wrap;
        }

        .hero-title {
            font-size: clamp(1.8rem, 4vw, 2.6rem);
            font-weight: 800;
            color: var(--fg-primary);
            margin-bottom: 10px;
        }

        .hero-title-accent {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-description {
            font-size: 1rem;
            color: var(--fg-secondary);
            max-width: 650px;
            line-height: 1.7;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            background: rgba(13, 148, 136, 0.08);
            border: 1px solid rgba(13, 148, 136, 0.15);
            border-radius: 100px;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--accent-primary);
        }

        .hero-badge svg { width: 14px; height: 14px; }

        .section-nav {
            position: sticky;
            top: 64px;
            background: rgba(244, 246, 249, 0.95);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(13, 148, 136, 0.06);
            z-index: 999;
            padding: 0 24px;
        }

        .section-nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding: 10px 0;
            scrollbar-width: none;
        }

        .section-nav-container::-webkit-scrollbar { display: none; }

        .nav-tab {
            padding: 10px 20px;
            font-family: inherit;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--fg-secondary);
            background: transparent;
            border: 1px solid transparent;
            border-radius: var(--radius-sm);
            cursor: pointer;
            white-space: nowrap;
            transition: var(--transition-fast);
        }

        .nav-tab:hover {
            background: rgba(13, 148, 136, 0.06);
            color: var(--accent-primary);
        }

        .nav-tab.active {
            background: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }

        .main-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 28px 24px 80px;
        }

        .content-section {
            display: none;
            opacity: 0;
            transform: translateY(15px);
            transition: opacity 0.35s ease, transform 0.35s ease;
        }

        .content-section.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .module-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
        }

        .module-card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 28px;
            box-shadow: var(--shadow-soft);
            border: 1px solid rgba(13, 148, 136, 0.04);
            transition: var(--transition-medium);
        }

        .module-card:hover { box-shadow: var(--shadow-medium); }

        .module-header {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--bg-secondary);
        }

        .module-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, rgba(13, 148, 136, 0.1), rgba(99, 102, 241, 0.08));
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .module-icon svg { width: 24px; height: 24px; color: var(--accent-primary); }

        .module-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--fg-primary);
            margin-bottom: 4px;
        }

        .module-subtitle {
            font-size: 0.85rem;
            color: var(--fg-muted);
        }

        .module-content h3 {
            font-size: 1rem;
            font-weight: 700;
            color: var(--fg-primary);
            margin: 20px 0 10px;
        }

        .module-content h3:first-child { margin-top: 0; }

        .module-content p {
            color: var(--fg-secondary);
            margin-bottom: 12px;
            line-height: 1.75;
            font-size: 0.95rem;
        }

        .module-content ul, .module-content ol {
            margin: 12px 0;
            padding-left: 20px;
        }

        .module-content li {
            color: var(--fg-secondary);
            margin-bottom: 6px;
            line-height: 1.65;
            font-size: 0.9rem;
        }

        .formula-box {
            background: linear-gradient(135deg, rgba(13, 148, 136, 0.04), rgba(99, 102, 241, 0.02));
            border: 1px solid rgba(13, 148, 136, 0.1);
            border-radius: var(--radius-md);
            padding: 20px;
            margin: 16px 0;
            text-align: center;
        }

        .formula {
            font-family: 'Space Grotesk', monospace;
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--accent-primary);
        }

        .formula-description {
            font-size: 0.8rem;
            color: var(--fg-muted);
            margin-top: 10px;
        }

        .info-table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
            font-size: 0.85rem;
        }

        .info-table th, .info-table td {
            padding: 12px 14px;
            text-align: left;
            border-bottom: 1px solid var(--bg-secondary);
        }

        .info-table th {
            background: var(--bg-secondary);
            font-weight: 600;
            color: var(--fg-primary);
            font-size: 0.8rem;
        }

        .info-table td { color: var(--fg-secondary); }

        .example-box {
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            padding: 18px;
            margin: 16px 0;
            border-left: 3px solid var(--accent-secondary);
        }

        .example-label {
            font-weight: 700;
            color: var(--accent-secondary);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            margin-bottom: 8px;
        }

        .reference-link {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 6px 12px;
            background: rgba(13, 148, 136, 0.06);
            border-radius: var(--radius-sm);
            font-size: 0.8rem;
            color: var(--accent-primary);
            text-decoration: none;
            margin: 3px;
            transition: var(--transition-fast);
        }

        .reference-link:hover {
            background: var(--accent-primary);
            color: white;
        }

        .reference-link svg { width: 12px; height: 12px; }

        .viz-container {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 24px;
        }

        .viz-controls {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 22px;
            box-shadow: var(--shadow-soft);
            border: 1px solid rgba(13, 148, 136, 0.04);
            height: fit-content;
        }

        .controls-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--fg-primary);
            margin-bottom: 18px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .controls-title svg { width: 18px; height: 18px; color: var(--accent-primary); }

        .control-group { margin-bottom: 18px; }

        .control-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--fg-secondary);
            margin-bottom: 8px;
        }

        .control-value {
            font-family: 'Space Grotesk', monospace;
            color: var(--accent-primary);
            background: rgba(13, 148, 136, 0.08);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
        }

        .slider {
            width: 100%;
            height: 6px;
            background: var(--bg-secondary);
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
            cursor: pointer;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: var(--accent-primary);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 6px var(--accent-glow);
            transition: var(--transition-fast);
        }

        .slider::-webkit-slider-thumb:hover { transform: scale(1.1); }

        .slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            background: var(--accent-primary);
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }

        .select-control {
            width: 100%;
            padding: 10px 14px;
            font-family: inherit;
            font-size: 0.85rem;
            color: var(--fg-secondary);
            background: var(--bg-secondary);
            border: 1px solid transparent;
            border-radius: var(--radius-sm);
            cursor: pointer;
            outline: none;
            transition: var(--transition-fast);
        }

        .select-control:focus {
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px var(--accent-glow);
        }

        .toggle-group { display: flex; gap: 6px; }

        .toggle-btn {
            flex: 1;
            padding: 9px;
            font-family: inherit;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--fg-secondary);
            background: var(--bg-secondary);
            border: 1px solid transparent;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .toggle-btn.active {
            background: var(--accent-primary);
            color: white;
        }

        .toggle-btn:hover:not(.active) {
            border-color: var(--accent-primary);
            color: var(--accent-primary);
        }

        .btn-reset {
            width: 100%;
            padding: 12px;
            font-family: inherit;
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--accent-primary);
            background: transparent;
            border: 2px solid var(--accent-primary);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition-fast);
            margin-top: 6px;
        }

        .btn-reset:hover {
            background: var(--accent-primary);
            color: white;
        }

        .viz-canvas-container {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-soft);
            border: 1px solid rgba(13, 148, 136, 0.04);
            overflow: hidden;
        }

        .viz-header {
            padding: 14px 20px;
            border-bottom: 1px solid var(--bg-secondary);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .viz-title {
            font-size: 0.95rem;
            font-weight: 700;
            color: var(--fg-primary);
        }

        .viz-result {
            font-family: 'Space Grotesk', monospace;
            font-size: 0.85rem;
            color: var(--accent-primary);
            background: rgba(13, 148, 136, 0.08);
            padding: 6px 14px;
            border-radius: var(--radius-sm);
        }

        .viz-canvas-wrapper {
            position: relative;
            width: 100%;
            height: 380px;
            background: linear-gradient(180deg, #fafbfc 0%, #f0f4f8 100%);
        }

        .viz-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .viz-info {
            padding: 16px 20px;
            background: var(--bg-secondary);
            border-top: 1px solid rgba(13, 148, 136, 0.06);
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
        }

        .info-item {
            display: flex;
            flex-direction: column;
            gap: 3px;
        }

        .info-label {
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--fg-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .info-value {
            font-family: 'Space Grotesk', monospace;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--fg-primary);
        }

        .quiz-container {
            max-width: 750px;
            margin: 0 auto;
        }

        .quiz-header {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 24px;
            box-shadow: var(--shadow-soft);
            border: 1px solid rgba(13, 148, 136, 0.04);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .quiz-info h2 {
            font-size: 1.2rem;
            color: var(--fg-primary);
            margin-bottom: 3px;
        }

        .quiz-info p {
            font-size: 0.85rem;
            color: var(--fg-muted);
        }

        .quiz-score {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 16px;
            background: linear-gradient(135deg, rgba(13, 148, 136, 0.08), rgba(99, 102, 241, 0.06));
            border-radius: var(--radius-md);
        }

        .score-label { font-size: 0.8rem; color: var(--fg-muted); }

        .score-value {
            font-family: 'Space Grotesk', monospace;
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--accent-primary);
        }

        .quiz-actions { display: flex; gap: 10px; }

        .btn-quiz {
            padding: 10px 18px;
            font-family: inherit;
            font-size: 0.8rem;
            font-weight: 600;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition-fast);
            border: none;
        }

        .btn-generate {
            background: var(--accent-secondary);
            color: white;
        }

        .btn-generate:hover {
            background: #4f46e5;
            transform: translateY(-2px);
        }

        .btn-retry {
            background: var(--bg-secondary);
            color: var(--fg-secondary);
        }

        .btn-retry:hover {
            background: var(--fg-secondary);
            color: white;
        }

        .question-card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 24px;
            box-shadow: var(--shadow-soft);
            border: 1px solid rgba(13, 148, 136, 0.04);
            margin-bottom: 16px;
            transition: var(--transition-medium);
        }

        .question-card.correct {
            border-color: var(--accent-success);
            background: rgba(5, 150, 105, 0.02);
        }

        .question-card.incorrect {
            border-color: var(--accent-error);
            background: rgba(220, 38, 38, 0.02);
        }

        .question-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 26px;
            height: 26px;
            background: var(--accent-primary);
            color: white;
            border-radius: 50%;
            font-size: 0.75rem;
            font-weight: 700;
            margin-right: 10px;
        }

        .question-text {
            font-size: 1rem;
            font-weight: 500;
            color: var(--fg-primary);
            margin-bottom: 18px;
            line-height: 1.55;
        }

        .options-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-btn {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 16px;
            background: var(--bg-secondary);
            border: 2px solid transparent;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition-fast);
            text-align: left;
        }

        .option-btn:hover:not(.selected):not(.disabled) {
            border-color: var(--accent-primary);
            background: rgba(13, 148, 136, 0.04);
        }

        .option-btn.selected {
            border-color: var(--accent-primary);
            background: rgba(13, 148, 136, 0.08);
        }

        .option-btn.correct {
            border-color: var(--accent-success);
            background: rgba(5, 150, 105, 0.1);
        }

        .option-btn.incorrect {
            border-color: var(--accent-error);
            background: rgba(220, 38, 38, 0.1);
        }

        .option-btn.disabled {
            cursor: default;
            opacity: 0.7;
        }

        .option-letter {
            width: 28px;
            height: 28px;
            background: white;
            border: 2px solid var(--fg-muted);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            color: var(--fg-secondary);
            flex-shrink: 0;
            transition: var(--transition-fast);
        }

        .option-btn.selected .option-letter {
            background: var(--accent-primary);
            border-color: var(--accent-primary);
            color: white;
        }

        .option-btn.correct .option-letter {
            background: var(--accent-success);
            border-color: var(--accent-success);
            color: white;
        }

        .option-btn.incorrect .option-letter {
            background: var(--accent-error);
            border-color: var(--accent-error);
            color: white;
        }

        .option-text {
            font-size: 0.9rem;
            color: var(--fg-secondary);
            line-height: 1.45;
        }

        .feedback-box {
            margin-top: 14px;
            padding: 12px 14px;
            border-radius: var(--radius-sm);
            font-size: 0.85rem;
            display: none;
        }

        .feedback-box.show { display: block; }

        .feedback-box.correct {
            background: rgba(5, 150, 105, 0.1);
            color: #047857;
            border-left: 3px solid var(--accent-success);
        }

        .feedback-box.incorrect {
            background: rgba(220, 38, 38, 0.1);
            color: #b91c1c;
            border-left: 3px solid var(--accent-error);
        }

        .quiz-result-card {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-primary-dark));
            border-radius: var(--radius-lg);
            padding: 36px;
            text-align: center;
            color: white;
            margin-top: 20px;
            display: none;
        }

        .quiz-result-card.show { display: block; }

        .result-icon {
            width: 72px;
            height: 72px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
        }

        .result-icon svg { width: 36px; height: 36px; }

        .result-title {
            font-size: 1.6rem;
            font-weight: 700;
            margin-bottom: 6px;
        }

        .result-score {
            font-family: 'Space Grotesk', monospace;
            font-size: 2.8rem;
            font-weight: 700;
            margin: 14px 0;
        }

        .result-message {
            font-size: 0.95rem;
            opacity: 0.9;
        }

        @media (max-width: 1100px) {
            .module-grid { grid-template-columns: 1fr; }
            .viz-container { grid-template-columns: 1fr; }
        }

        @media (max-width: 768px) {
            .navbar { padding: 0 16px; }
            .navbar-title { font-size: 0.9rem; }
            .btn-nav span { display: none; }
            .hero { padding: 28px 16px 20px; }
            .hero-title { font-size: 1.5rem; }
            .section-nav { top: 64px; padding: 0 16px; }
            .nav-tab { padding: 8px 14px; font-size: 0.8rem; }
            .main-content { padding: 16px 16px 60px; }
            .module-card { padding: 22px; }
            .module-header { flex-direction: column; gap: 12px; }
            .viz-controls { padding: 18px; }
            .viz-canvas-wrapper { height: 320px; }
            .quiz-header { padding: 18px; flex-direction: column; text-align: center; }
            .question-card { padding: 18px; }
            .info-grid { grid-template-columns: 1fr 1fr; }
        }

        @media (max-width: 480px) {
            .hero-title { font-size: 1.3rem; }
            .formula { font-size: 1.1rem; }
            .option-btn { padding: 12px 14px; }
            .info-grid { grid-template-columns: 1fr; }
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        *:focus-visible {
            outline: 2px solid var(--accent-primary);
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <nav class="navbar" role="navigation">
        <div class="navbar-container">
            <a href="#" class="navbar-brand">
                <div class="navbar-logo">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                </div>
                <span class="navbar-title">E-Learning <span>Kelas 12</span></span>
            </a>
            <a href="../../../index.html" target="_self" class="btn-nav">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                </svg>
                <span>Dashboard</span>
            </a>
        </div>
    </nav>

    <section class="hero">
        <div class="breadcrumb">
            <a href="../../../index.html" target="_self">Dashboard</a>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
            </svg>
            <a href="../fisika.html" target="_self">Fisika</a>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
            </svg>
            <span>Medan Magnetik</span>
        </div>
        <div class="hero-header">
            <div>
                <h1 class="hero-title">
                    <span class="hero-title-accent">Medan Magnetik di Sekitar Arus Listrik</span>
                </h1>
                <p class="hero-description">
                    Pelajari medan magnet, hukum Biot-Savart, gaya Lorentz, dan aplikasi induksi elektromagnetik melalui visualisasi interaktif dan kuis adaptif.
                </p>
            </div>
            <span class="hero-badge">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                </svg>
                Elektromagnetisme
            </span>
        </div>
    </section>

    <div class="section-nav">
        <div class="section-nav-container">
            <button class="nav-tab active" data-section="module">Modul Materi</button>
            <button class="nav-tab" data-section="visualization">Visualisasi Interaktif</button>
            <button class="nav-tab" data-section="quiz">Kuis Interaktif</button>
        </div>
    </div>

    <main class="main-content">
        <section class="content-section active" id="module">
            <div class="module-grid">
                <article class="module-card">
                    <div class="module-header">
                        <div class="module-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="3" />
                                <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
                            </svg>
                        </div>
                        <div>
                            <h2 class="module-title">Medan Magnet</h2>
                            <p class="module-subtitle">Konsep Dasar dan Sumber Medan</p>
                        </div>
                    </div>
                    <div class="module-content">
                        <h3>Pengertian Dasar</h3>
                        <p>Medan magnet adalah ruang di sekitar magnet atau arus listrik di mana gaya magnetik bekerja pada benda lain. Garis medan magnet keluar dari kutub utara, masuk kutub selatan, dan tidak saling berpotongan.</p>

                        <div class="formula-box">
                            <div class="formula">B = μ₀I / (2πr)</div>
                            <p class="formula-description">Medan magnet di sekitar kawat lurus berarus</p>
                        </div>

                        <h3>Sumber Medan Magnet</h3>
                        <ul>
                            <li>Magnet permanen</li>
                            <li>Arus listrik (muatan bergerak)</li>
                            <li>Kawat lurus, lingkaran, solenoida, toroida</li>
                        </ul>

                        <h3>Arah Medan</h3>
                        <p>Ditentukan dengan kaidah tangan kanan: ibu jari searah arus, jari melingkar searah medan B.</p>

                        <div class="example-box">
                            <div class="example-label">Contoh Soal</div>
                            <p>Kawat dialiri arus 5 A, jarak 2 cm dari kawat. Hitung B!</p>
                            <p><strong>Jawab:</strong> B = (4π×10⁻⁷ × 5) / (2π × 0,02) = 5×10⁻⁵ T</p>
                        </div>

                        <h3>Referensi</h3>
                        <div>
                            <a href="https://mamikos.com/info/ringkasan-materi-medan-magnet-sma-kelas-12-pljr/" target="_self" class="reference-link">Mamikos</a>
                            <a href="http://www.fisikasekolah.com/2016/11/gaya-magnet-pada-partikel-bermuatan.html" target="_self" class="reference-link">Fisika Sekolah</a>
                        </div>
                    </div>
                </article>

                <article class="module-card">
                    <div class="module-header">
                        <div class="module-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                            </svg>
                        </div>
                        <div>
                            <h2 class="module-title">Hukum Biot-Savart</h2>
                            <p class="module-subtitle">Perhitungan Medan Magnet</p>
                        </div>
                    </div>
                    <div class="module-content">
                        <h3>Pengertian Hukum</h3>
                        <p>Elemen kecil panjang kawat dl yang dialiri arus I menghasilkan medan magnet diferensial dB pada titik P.</p>

                        <div class="formula-box">
                            <div class="formula">dB = (μ₀/4π) × (I dl × r̂) / r²</div>
                            <p class="formula-description">μ₀ = 4π × 10⁻⁷ T·m/A</p>
                        </div>

                        <h3>Turunan untuk Kawat Lurus</h3>
                        <p>Untuk kawat lurus tak hingga:</p>
                        <div class="formula-box">
                            <div class="formula">B = μ₀I / (2πd)</div>
                        </div>

                        <h3>Aplikasi pada Kawat Lingkar</h3>
                        <p>Di pusat loop lingkaran jari-jari R:</p>
                        <div class="formula-box">
                            <div class="formula">B = μ₀I / (2R)</div>
                        </div>

                        <h3>Referensi</h3>
                        <div>
                            <a href="https://id.wikipedia.org/wiki/Hukum_Biot-Savart" target="_self" class="reference-link">Wikipedia</a>
                        </div>
                    </div>
                </article>

                <article class="module-card">
                    <div class="module-header">
                        <div class="module-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
                            </svg>
                        </div>
                        <div>
                            <h2 class="module-title">Gaya Lorentz</h2>
                            <p class="module-subtitle">Gaya pada Muatan Bergerak</p>
                        </div>
                    </div>
                    <div class="module-content">
                        <h3>Pengertian Dasar</h3>
                        <p>Gaya Lorentz timbul ketika muatan listrik q bergerak dengan kecepatan v di medan magnet B.</p>

                        <div class="formula-box">
                            <div class="formula">F = qvB sin θ</div>
                            <p class="formula-description">θ = sudut antara v dan B</p>
                        </div>

                        <h3>Arah Gaya Lorentz</h3>
                        <p>Tegak lurus terhadap bidang v dan B, ditentukan kaidah tangan kanan untuk q positif (kebalikan untuk q negatif).</p>

                        <h3>Gerak Muatan di Medan Homogen</h3>
                        <ul>
                            <li>v tegak lurus B: lintasan lingkaran, r = mv/(qB)</li>
                            <li>v paralel B: gerak lurus seragam</li>
                            <li>Kombinasi: lintasan heliks</li>
                        </ul>

                        <h3>Radius Lintasan Melingkar</h3>
                        <div class="formula-box">
                            <div class="formula">r = mv / (qB)</div>
                            <p class="formula-description">Periode T = 2πm/(qB)</p>
                        </div>

                        <div class="example-box">
                            <div class="example-label">Contoh Soal</div>
                            <p>Elektron (q = 1,6×10⁻¹⁹ C) bergerak 10⁶ m/s di medan B = 0,5 T. Hitung gaya!</p>
                            <p><strong>Jawab:</strong> F = 1,6×10⁻¹⁹ × 10⁶ × 0,5 = 8×10⁻¹⁴ N</p>
                        </div>
                    </div>
                </article>

                <article class="module-card">
                    <div class="module-header">
                        <div class="module-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                            </svg>
                        </div>
                        <div>
                            <h2 class="module-title">Induksi Elektromagnetik</h2>
                            <p class="module-subtitle">Generator dan Transformator</p>
                        </div>
                    </div>
                    <div class="module-content">
                        <h3>Dasar Induksi</h3>
                        <p>Fluks magnetik Φ = BA cos θ. Hukum Faraday: GGL induksi ε = -N(ΔΦ/Δt).</p>

                        <div class="formula-box">
                            <div class="formula">ε = -N × ΔΦ / Δt</div>
                            <p class="formula-description">Hukum Lenz: arus induksi menentang perubahan fluks</p>
                        </div>

                        <h3>Generator Listrik</h3>
                        <p>GGL generator: ε = NBAω sin(ωt), dengan ε_max = NBAω.</p>

                        <h3>Transformator</h3>
                        <p>Rasio tegangan: V_s/V_p = N_s/N_p. Rasio arus: I_s/I_p = N_p/N_s.</p>

                        <h3>Aplikasi Lain</h3>
                        <ul>
                            <li>Motor listrik</li>
                            <li>Induktansi diri: L = NΦ/I</li>
                            <li>Energi induktor: W = ½LI²</li>
                        </ul>

                        <h3>Referensi</h3>
                        <div>
                            <a href="https://www.quipper.com/id/blog/mapel/fisika/induksi-elektromagnetik/" target="_self" class="reference-link">Quipper</a>
                            <a href="https://kumparan.com/ragam-info/ringkasan-materi-induksi-elektromagnetik-kelas-12-23rNxcAzPA0" target="_self" class="reference-link">Kumparan</a>
                        </div>
                    </div>
                </article>
            </div>
        </section>

        <section class="content-section" id="visualization">
            <div class="viz-container">
                <aside class="viz-controls">
                    <h3 class="controls-title">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4" />
                        </svg>
                        Kontrol Simulasi
                    </h3>

                    <div class="control-group">
                        <label class="control-label">Mode Simulasi</label>
                        <select class="select-control" id="simMode">
                            <option value="field">Medan Magnet Kawat</option>
                            <option value="lorentz">Gaya Lorentz</option>
                            <option value="induction">Induksi EMF</option>
                        </select>
                    </div>

                    <div id="fieldControls">
                        <div class="control-group">
                            <label class="control-label">
                                Arus (I)
                                <span class="control-value" id="currentValue">5.0 A</span>
                            </label>
                            <input type="range" class="slider" id="currentSlider" min="0" max="20" value="5" step="0.5">
                        </div>

                        <div class="control-group">
                            <label class="control-label">
                                Jarak (r)
                                <span class="control-value" id="distanceValue">5.0 cm</span>
                            </label>
                            <input type="range" class="slider" id="distanceSlider" min="1" max="15" value="5" step="0.5">
                        </div>

                        <div class="control-group">
                            <label class="control-label">Arah Arus</label>
                            <div class="toggle-group">
                                <button class="toggle-btn active" id="currentUp">Keluar Layar</button>
                                <button class="toggle-btn" id="currentDown">Masuk Layar</button>
                            </div>
                        </div>
                    </div>

                    <div id="lorentzControls" style="display: none;">
                        <div class="control-group">
                            <label class="control-label">
                                Muatan (q)
                                <span class="control-value" id="chargeValue">1.6e-19 C</span>
                            </label>
                            <input type="range" class="slider" id="chargeSlider" min="1" max="10" value="1" step="1">
                        </div>

                        <div class="control-group">
                            <label class="control-label">
                                Kecepatan (v)
                                <span class="control-value" id="velocityValue">1.0e6 m/s</span>
                            </label>
                            <input type="range" class="slider" id="velocitySlider" min="1" max="10" value="1" step="0.5">
                        </div>

                        <div class="control-group">
                            <label class="control-label">
                                Medan Magnet (B)
                                <span class="control-value" id="bFieldValue">0.5 T</span>
                            </label>
                            <input type="range" class="slider" id="bFieldSlider" min="1" max="20" value="5" step="1">
                        </div>

                        <div class="control-group">
                            <label class="control-label">Jenis Muatan</label>
                            <div class="toggle-group">
                                <button class="toggle-btn active" id="positiveCharge">Positif</button>
                                <button class="toggle-btn" id="negativeCharge">Negatif</button>
                            </div>
                        </div>
                    </div>

                    <div id="inductionControls" style="display: none;">
                        <div class="control-group">
                            <label class="control-label">
                                Jumlah Lilitan (N)
                                <span class="control-value" id="turnsValue">100</span>
                            </label>
                            <input type="range" class="slider" id="turnsSlider" min="10" max="500" value="100" step="10">
                        </div>

                        <div class="control-group">
                            <label class="control-label">
                                Kecepatan Sudut (ω)
                                <span class="control-value" id="omegaValue">10 rad/s</span>
                            </label>
                            <input type="range" class="slider" id="omegaSlider" min="1" max="50" value="10" step="1">
                        </div>

                        <div class="control-group">
                            <label class="control-label">
                                Luas Kumparan (A)
                                <span class="control-value" id="areaValueValue">0.01 m²</span>
                            </label>
                            <input type="range" class="slider" id="areaSlider" min="1" max="10" value="1" step="1">
                        </div>

                        <div class="control-group">
                            <label class="control-label">
                                Medan Magnet (B)
                                <span class="control-value" id="inductionBValue">0.5 T</span>
                            </label>
                            <input type="range" class="slider" id="inductionBSlider" min="1" max="10" value="5" step="1">
                        </div>
                    </div>

                    <button class="btn-reset" id="resetBtn">Reset Simulasi</button>
                </aside>

                <div class="viz-canvas-container">
                    <div class="viz-header">
                        <span class="viz-title" id="vizTitle">Simulasi Medan Magnet</span>
                        <span class="viz-result" id="vizResult">B = 2.0e-5 T</span>
                    </div>
                    <div class="viz-canvas-wrapper">
                        <canvas class="viz-canvas" id="simCanvas"></canvas>
                    </div>
                    <div class="viz-info">
                        <div class="info-grid" id="infoGrid">
                            <div class="info-item">
                                <span class="info-label">Medan Magnet (B)</span>
                                <span class="info-value" id="infoB">2.0e-5 T</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Arah Medan</span>
                                <span class="info-value" id="infoDirection">Berlawanan Jarum Jam</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">μ₀</span>
                                <span class="info-value" id="infoMu">4π×10⁻⁷ T·m/A</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Status</span>
                                <span class="info-value" id="infoStatus">Aktif</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="content-section" id="quiz">
            <div class="quiz-container">
                <div class="quiz-header">
                    <div class="quiz-info">
                        <h2>Kuis Medan Magnetik</h2>
                        <p>Uji pemahaman Anda tentang medan magnet dan induksi elektromagnetik</p>
                    </div>
                    <div class="quiz-score">
                        <span class="score-label">Skor:</span>
                        <span class="score-value" id="scoreDisplay">0/5</span>
                    </div>
                </div>

                <div class="quiz-actions">
                    <button class="btn-quiz btn-generate" id="generateBtn">Generate Soal Baru</button>
                    <button class="btn-quiz btn-retry" id="retryBtn">Ulangi Kuis</button>
                </div>

                <div id="quizContainer"></div>

                <div class="quiz-result-card" id="resultCard">
                    <div class="result-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                    <h3 class="result-title">Kuis Selesai</h3>
                    <div class="result-score" id="finalScore">0/5</div>
                    <p class="result-message" id="resultMessage">Terus berlatih untuk meningkatkan pemahaman!</p>
                </div>
            </div>
        </section>
    </main>

    <script>
        // ========================================
        // Question Bank - TAMBAHKAN SOAL DI SINI
        // ========================================
        var questionBank = [
            // Medan Magnet - Konsep
            {
                question: "Medan magnet adalah...",
                options: ["Gaya antara dua muatan", "Ruang di sekitar magnet dengan gaya magnetik", "Aliran elektron dalam kawat", "Energi yang tersimpan dalam medan listrik"],
                correct: 1,
                explanation: "Medan magnet adalah ruang di sekitar magnet atau arus listrik di mana gaya magnetik bekerja pada benda lain."
            },
            {
                question: "Satuan kuat medan magnet adalah...",
                options: ["Newton", "Watt", "Tesla", "Coulomb"],
                correct: 2,
                explanation: "Kuat medan magnet memiliki satuan Tesla (T)."
            },
            {
                question: "Garis medan magnet keluar dari kutub...",
                options: ["Selatan", "Utara", "Timur", "Barat"],
                correct: 1,
                explanation: "Garis medan magnet keluar dari kutub utara dan masuk ke kutub selatan."
            },
            {
                question: "Rumus medan magnet di sekitar kawat lurus adalah...",
                options: ["B = μ₀I/r", "B = μ₀I/(2πr)", "B = 2πμ₀I/r", "B = μ₀I²/r"],
                correct: 1,
                explanation: "Medan magnet di sekitar kawat lurus: B = μ₀I/(2πr)"
            },
            {
                question: "Nilai μ₀ (permeabilitas ruang hampa) adalah...",
                options: ["4π × 10⁻⁷ T·m/A", "8,85 × 10⁻¹² F/m", "9 × 10⁹ N·m²/C²", "6,67 × 10⁻¹¹ N·m²/kg²"],
                correct: 0,
                explanation: "μ₀ = 4π × 10⁻⁷ T·m/A"
            },
            // Medan Magnet - Perhitungan
            {
                question: "Kawat dialiri arus 5 A, jarak 2 cm dari kawat. Hitung B! (μ₀ = 4π×10⁻⁷)",
                options: ["2,5 × 10⁻⁵ T", "5,0 × 10⁻⁵ T", "1,0 × 10⁻⁴ T", "2,5 × 10⁻⁴ T"],
                correct: 1,
                explanation: "B = μ₀I/(2πr) = (4π×10⁻⁷ × 5)/(2π × 0,02) = 5,0 × 10⁻⁵ T"
            },
            {
                question: "Jika arus dilipatgandakan, medan magnet B menjadi...",
                options: ["Setengahnya", "Sama", "Dua kali lipat", "Empat kali lipat"],
                correct: 2,
                explanation: "B sebanding dengan I, jadi jika I dilipatgandakan, B juga dua kali lipat."
            },
            {
                question: "Jika jarak dari kawat diperbesar 2 kali, B menjadi...",
                options: ["2 kali", "Setengahnya", "4 kali", "Seperempatnya"],
                correct: 1,
                explanation: "B berbanding terbalik dengan r, jadi jika r dilipatgandakan, B menjadi setengahnya."
            },
            {
                question: "Loop jari-jari 10 cm dialiri 4 A. Hitung B di pusat!",
                options: ["2,5 × 10⁻⁶ T", "5,0 × 10⁻⁶ T", "1,0 × 10⁻⁵ T", "2,5 × 10⁻⁵ T"],
                correct: 0,
                explanation: "B = μ₀I/(2R) = (4π×10⁻⁷ × 4)/(2 × 0,1) = 2,5 × 10⁻⁶ T"
            },
            // Biot-Savart
            {
                question: "Hukum Biot-Savart menjelaskan...",
                options: ["Gaya antara dua muatan", "Medan magnet akibat arus listrik", "Induksi elektromagnetik", "Hukum Ohm untuk rangkaian"],
                correct: 1,
                explanation: "Hukum Biot-Savart menjelaskan perhitungan medan magnet akibat arus listrik."
            },
            {
                question: "dB dalam hukum Biot-Savart berbanding lurus dengan...",
                options: ["1/I", "I", "I²", "1/I²"],
                correct: 1,
                explanation: "dB berbanding lurus dengan arus I dan panjang elemen dl."
            },
            {
                question: "dB dalam hukum Biot-Savart berbanding terbalik dengan...",
                options: ["r", "r²", "√r", "1/r²"],
                correct: 1,
                explanation: "dB berbanding terbalik dengan kuadrat jarak r²."
            },
            // Gaya Lorentz
            {
                question: "Gaya Lorentz terjadi ketika...",
                options: ["Muatan diam dalam medan listrik", "Muatan bergerak dalam medan magnet", "Dua magnet saling mendekat", "Arus mengalir dalam kawat"],
                correct: 1,
                explanation: "Gaya Lorentz terjadi pada muatan bergerak dalam medan magnet."
            },
            {
                question: "Rumus gaya Lorentz adalah...",
                options: ["F = qE", "F = qvB sin θ", "F = ma", "F = kq₁q₂/r²"],
                correct: 1,
                explanation: "Gaya Lorentz: F = qvB sin θ"
            },
            {
                question: "Jika kecepatan v paralel dengan medan B, gaya Lorentz adalah...",
                options: ["Maksimum", "Minimum", "Nol", "Tak hingga"],
                correct: 2,
                explanation: "Jika v paralel B (θ = 0°), sin 0° = 0, sehingga F = 0."
            },
            {
                question: "Radius lintasan muatan dalam medan magnet homogen (v tegak lurus B) adalah...",
                options: ["r = qB/mv", "r = mv/qB", "r = mB/qv", "r = qv/mB"],
                correct: 1,
                explanation: "Radius lintasan melingkar: r = mv/(qB)"
            },
            {
                question: "Elektron (q=1,6×10⁻¹⁹ C) bergerak 10⁶ m/s di medan B=0,5 T. Hitung F!",
                options: ["4×10⁻¹⁴ N", "8×10⁻¹⁴ N", "1,6×10⁻¹³ N", "3,2×10⁻¹³ N"],
                correct: 1,
                explanation: "F = qvB = 1,6×10⁻¹⁹ × 10⁶ × 0,5 = 8×10⁻¹⁴ N"
            },
            // Induksi Elektromagnetik
            {
                question: "Fluks magnetik adalah...",
                options: ["Gaya per satuan muatan", "Jumlah garis medan yang menembus suatu luas", "Energi dalam medan magnet", "Arus yang dihasilkan magnet"],
                correct: 1,
                explanation: "Fluks magnetik Φ adalah jumlah garis medan magnet yang menembus suatu luas."
            },
            {
                question: "Rumus fluks magnetik adalah...",
                options: ["Φ = B/A", "Φ = BA cos θ", "Φ = B/A cos θ", "Φ = B²A"],
                correct: 1,
                explanation: "Fluks magnetik: Φ = BA cos θ"
            },
            {
                question: "Hukum Faraday menyatakan...",
                options: ["F = ma", "ε = -N ΔΦ/Δt", "V = IR", "F = qvB"],
                correct: 1,
                explanation: "Hukum Faraday: GGL induksi ε = -N × ΔΦ/Δt"
            },
            {
                question: "Hukum Lenz menyatakan arah arus induksi...",
                options: ["Searah dengan perubahan fluks", "Menentang perubahan fluks", "Tegak lurus fluks", "Tidak memiliki arah tertentu"],
                correct: 1,
                explanation: "Hukum Lenz: arus induksi menentang perubahan fluks yang menimbulkannya."
            },
            {
                question: "Transformator step-up memiliki...",
                options: ["Ns < Np", "Ns > Np", "Ns = Np", "Tidak memiliki lilitan"],
                correct: 1,
                explanation: "Transformator step-up memiliki lilitan sekunder lebih banyak (Ns > Np)."
            },
            {
                question: "Rasio tegangan transformator ideal adalah...",
                options: ["Vs/Vp = Np/Ns", "Vs/Vp = Ns/Np", "Vs/Vp = Is/Ip", "Vs/Vp = Ip/Is"],
                correct: 1,
                explanation: "Rasio tegangan: Vs/Vp = Ns/Np"
            },
            // Tambahan soal
            {
                question: "Medan magnet di dalam solenoida panjang adalah...",
                options: ["B = μ₀nI", "B = μ₀I/(2πr)", "B = μ₀I/(2R)", "B = μ₀I/r"],
                correct: 0,
                explanation: "Medan magnet di dalam solenoida: B = μ₀nI, n = lilitan per satuan panjang."
            },
            {
                question: "Arah medan magnet kawat lurus berarus ditentukan dengan...",
                options: ["Kaidah tangan kiri", "Kaidah tangan kanan", "Hukum Ohm", "Hukum Kirchhoff"],
                correct: 1,
                explanation: "Arah medan magnet ditentukan dengan kaidah tangan kanan."
            },
            {
                question: "Siklotron menggunakan prinsip...",
                options: ["Induksi elektromagnetik", "Gaya Lorentz", "Hukum Ohm", "Hukum Kirchhoff"],
                correct: 1,
                explanation: "Siklotron menggunakan gaya Lorentz untuk mempercepat partikel bermuatan."
            },
            {
                question: "Generator mengubah energi...",
                options: ["Listrik ke mekanik", "Mekanik ke listrik", "Panas ke listrik", "Cahaya ke listrik"],
                correct: 1,
                explanation: "Generator mengubah energi mekanik menjadi energi listrik via induksi."
            },
            {
                question: "Periode revolusi muatan dalam medan magnet adalah...",
                options: ["T = 2πr/v", "T = 2πm/(qB)", "T = 2πB/m", "T = qB/(2πm)"],
                correct: 1,
                explanation: "Periode revolusi: T = 2πm/(qB), tidak bergantung pada kecepatan."
            },
            {
                question: "Jika jumlah lilitan kumparan dinaikkan 2 kali, GGL induksi menjadi...",
                options: ["Setengahnya", "Sama", "2 kali", "4 kali"],
                correct: 2,
                explanation: "GGL induksi sebanding dengan N, jadi jika N naik 2 kali, GGL juga 2 kali."
            }
        ];

        // ========================================
        // Global State
        // ========================================
        var currentQuestions = [];
        var userAnswers = [];
        var score = 0;
        var quizSubmitted = false;

        // Visualization State
        var simMode = 'field';
        var currentI = 5;
        var distanceR = 5;
        var currentUp = true;
        var chargeQ = 1;
        var velocityV = 1;
        var bFieldB = 5;
        var isPositive = true;
        var turnsN = 100;
        var omegaW = 10;
        var areaA = 1;
        var inductionB = 5;
        var canvas = null;
        var ctx = null;
        var animationFrame = null;
        var time = 0;

        // ========================================
        // DOM Ready
        // ========================================
        document.addEventListener('DOMContentLoaded', function() {
            initNavigation();
            initVisualization();
            initQuiz();
            initAnimations();
        });

        // ========================================
        // Navigation
        // ========================================
        function initNavigation() {
            var navTabs = document.querySelectorAll('.nav-tab');
            var sections = document.querySelectorAll('.content-section');

            navTabs.forEach(function(tab) {
                tab.addEventListener('click', function() {
                    var sectionId = this.getAttribute('data-section');
                    
                    navTabs.forEach(function(t) { t.classList.remove('active'); });
                    this.classList.add('active');
                    
                    sections.forEach(function(s) {
                        s.classList.remove('active');
                        if (s.id === sectionId) {
                            s.classList.add('active');
                        }
                    });

                    if (sectionId === 'visualization') {
                        setTimeout(function() {
                            resizeCanvas();
                            drawVisualization();
                        }, 100);
                    }
                });
            });
        }

        // ========================================
        // Visualization
        // ========================================
        function initVisualization() {
            canvas = document.getElementById('simCanvas');
            if (!canvas) return;
            ctx = canvas.getContext('2d');

            resizeCanvas();
            setupVisualizationControls();
            startAnimation();
        }

        function resizeCanvas() {
            if (!canvas) return;
            var wrapper = canvas.parentElement;
            if (!wrapper) return;
            canvas.width = wrapper.offsetWidth;
            canvas.height = wrapper.offsetHeight;
        }

        function setupVisualizationControls() {
            // Mode selector
            var simModeSelect = document.getElementById('simMode');
            if (simModeSelect) {
                simModeSelect.addEventListener('change', function() {
                    simMode = this.value;
                    updateControlVisibility();
                    drawVisualization();
                });
            }

            // Field controls
            setupSlider('currentSlider', 'currentValue', function(v) { currentI = v; }, '{v} A');
            setupSlider('distanceSlider', 'distanceValue', function(v) { distanceR = v; }, '{v} cm');

            var currentUpBtn = document.getElementById('currentUp');
            var currentDownBtn = document.getElementById('currentDown');

            if (currentUpBtn) {
                currentUpBtn.addEventListener('click', function() {
                    currentUp = true;
                    this.classList.add('active');
                    if (currentDownBtn) currentDownBtn.classList.remove('active');
                    drawVisualization();
                });
            }

            if (currentDownBtn) {
                currentDownBtn.addEventListener('click', function() {
                    currentUp = false;
                    this.classList.add('active');
                    if (currentUpBtn) currentUpBtn.classList.remove('active');
                    drawVisualization();
                });
            }

            // Lorentz controls
            setupSlider('chargeSlider', 'chargeValue', function(v) { chargeQ = v; }, '{v}e-19 C');
            setupSlider('velocitySlider', 'velocityValue', function(v) { velocityV = v; }, '{v}e6 m/s');
            setupSlider('bFieldSlider', 'bFieldValue', function(v) { bFieldB = v; }, '{v} T', 0.1);

            var positiveBtn = document.getElementById('positiveCharge');
            var negativeBtn = document.getElementById('negativeCharge');

            if (positiveBtn) {
                positiveBtn.addEventListener('click', function() {
                    isPositive = true;
                    this.classList.add('active');
                    if (negativeBtn) negativeBtn.classList.remove('active');
                    drawVisualization();
                });
            }

            if (negativeBtn) {
                negativeBtn.addEventListener('click', function() {
                    isPositive = false;
                    this.classList.add('active');
                    if (positiveBtn) positiveBtn.classList.remove('active');
                    drawVisualization();
                });
            }

            // Induction controls
            setupSlider('turnsSlider', 'turnsValue', function(v) { turnsN = v; }, '{v}');
            setupSlider('omegaSlider', 'omegaValue', function(v) { omegaW = v; }, '{v} rad/s');
            setupSlider('areaSlider', 'areaValueValue', function(v) { areaA = v; }, '0.0{v} m²');
            setupSlider('inductionBSlider', 'inductionBValue', function(v) { inductionB = v; }, '{v} T', 0.1);

            // Reset button
            var resetBtn = document.getElementById('resetBtn');
            if (resetBtn) {
                resetBtn.addEventListener('click', resetVisualization);
            }

            window.addEventListener('resize', function() {
                resizeCanvas();
                drawVisualization();
            });
        }

        function setupSlider(sliderId, valueId, callback, format, multiplier) {
            var slider = document.getElementById(sliderId);
            if (!slider) return;
            
            slider.addEventListener('input', function() {
                var v = parseFloat(this.value);
                callback(v);
                var displayText = format.replace('{v}', multiplier ? (v * multiplier).toFixed(1) : v.toFixed(1));
                var valueEl = document.getElementById(valueId);
                if (valueEl) valueEl.textContent = displayText;
                drawVisualization();
            });
        }

        function updateControlVisibility() {
            var fieldControls = document.getElementById('fieldControls');
            var lorentzControls = document.getElementById('lorentzControls');
            var inductionControls = document.getElementById('inductionControls');
            var vizTitle = document.getElementById('vizTitle');

            if (fieldControls) fieldControls.style.display = 'none';
            if (lorentzControls) lorentzControls.style.display = 'none';
            if (inductionControls) inductionControls.style.display = 'none';

            if (simMode === 'field') {
                if (fieldControls) fieldControls.style.display = 'block';
                if (vizTitle) vizTitle.textContent = 'Simulasi Medan Magnet Kawat';
            } else if (simMode === 'lorentz') {
                if (lorentzControls) lorentzControls.style.display = 'block';
                if (vizTitle) vizTitle.textContent = 'Simulasi Gaya Lorentz';
            } else if (simMode === 'induction') {
                if (inductionControls) inductionControls.style.display = 'block';
                if (vizTitle) vizTitle.textContent = 'Simulasi Generator AC';
            }
        }

        function resetVisualization() {
            currentI = 5;
            distanceR = 5;
            currentUp = true;
            chargeQ = 1;
            velocityV = 1;
            bFieldB = 5;
            isPositive = true;
            turnsN = 100;
            omegaW = 10;
            areaA = 1;
            inductionB = 5;

            // Reset sliders
            var sliders = {
                'currentSlider': 'currentValue|{v} A',
                'distanceSlider': 'distanceValue|{v} cm',
                'chargeSlider': 'chargeValue|{v}e-19 C',
                'velocitySlider': 'velocityValue|{v}e6 m/s',
                'bFieldSlider': 'bFieldValue|{v} T',
                'turnsSlider': 'turnsValue|{v}',
                'omegaSlider': 'omegaValue|{v} rad/s',
                'areaSlider': 'areaValueValue|0.0{v} m²',
                'inductionBSlider': 'inductionBValue|{v} T'
            };

            var defaults = {
                'currentSlider': 5, 'distanceSlider': 5, 'chargeSlider': 1,
                'velocitySlider': 1, 'bFieldSlider': 5, 'turnsSlider': 100,
                'omegaSlider': 10, 'areaSlider': 1, 'inductionBSlider': 5
            };

            Object.keys(sliders).forEach(function(id) {
                var slider = document.getElementById(id);
                if (slider) slider.value = defaults[id];
            });

            // Reset toggle buttons
            var toggleBtns = ['currentUp', 'positiveCharge'];
            toggleBtns.forEach(function(id) {
                var btn = document.getElementById(id);
                if (btn) btn.classList.add('active');
            });

            var removeBtns = ['currentDown', 'negativeCharge'];
            removeBtns.forEach(function(id) {
                var btn = document.getElementById(id);
                if (btn) btn.classList.remove('active');
            });

            drawVisualization();
        }

        function startAnimation() {
            function animate() {
                time += 0.02;
                drawVisualization();
                animationFrame = requestAnimationFrame(animate);
            }
            animate();
        }

        function drawVisualization() {
            if (!ctx || !canvas) return;
            if (canvas.width === 0 || canvas.height === 0) resizeCanvas();

            var w = canvas.width;
            var h = canvas.height;

            ctx.clearRect(0, 0, w, h);

            // Background
            var bgGrad = ctx.createLinearGradient(0, 0, 0, h);
            bgGrad.addColorStop(0, '#fafbfc');
            bgGrad.addColorStop(1, '#f0f4f8');
            ctx.fillStyle = bgGrad;
            ctx.fillRect(0, 0, w, h);

            // Grid
            ctx.strokeStyle = 'rgba(13, 148, 136, 0.04)';
            ctx.lineWidth = 1;
            for (var x = 0; x < w; x += 30) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, h);
                ctx.stroke();
            }
            for (var y = 0; y < h; y += 30) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(w, y);
                ctx.stroke();
            }

            if (simMode === 'field') {
                drawFieldVisualization(w, h);
            } else if (simMode === 'lorentz') {
                drawLorentzVisualization(w, h);
            } else if (simMode === 'induction') {
                drawInductionVisualization(w, h);
            }

            updateInfoDisplay();
        }

        function drawFieldVisualization(w, h) {
            var cx = w / 2;
            var cy = h / 2;
            var mu0 = 4 * Math.PI * 1e-7;
            var rMeters = distanceR / 100;
            var B = (mu0 * currentI) / (2 * Math.PI * rMeters);

            // Draw wire (cross-section)
            var wireRadius = Math.max(12, currentI * 0.8);
            
            // Wire glow
            var wireGlow = ctx.createRadialGradient(cx, cy, 0, cx, cy, wireRadius * 3);
            wireGlow.addColorStop(0, 'rgba(13, 148, 136, 0.3)');
            wireGlow.addColorStop(1, 'rgba(13, 148, 136, 0)');
            ctx.fillStyle = wireGlow;
            ctx.beginPath();
            ctx.arc(cx, cy, wireRadius * 3, 0, Math.PI * 2);
            ctx.fill();

            // Wire body
            ctx.beginPath();
            ctx.arc(cx, cy, wireRadius, 0, Math.PI * 2);
            ctx.fillStyle = '#0d9488';
            ctx.fill();
            ctx.strokeStyle = '#0f766e';
            ctx.lineWidth = 2;
            ctx.stroke();

            // Current direction indicator
            ctx.fillStyle = 'white';
            ctx.font = 'bold 14px Space Grotesk';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(currentUp ? '⊙' : '⊗', cx, cy);

            // Magnetic field lines (circles)
            if (currentI > 0) {
                var numLines = Math.min(Math.ceil(currentI / 2) + 3, 10);
                for (var i = 1; i <= numLines; i++) {
                    var radius = 30 + i * 28;
                    if (radius > Math.min(w, h) / 2) break;

                    ctx.strokeStyle = 'rgba(99, 102, 241, ' + (0.4 - i * 0.03) + ')';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.arc(cx, cy, radius, 0, Math.PI * 2);
                    ctx.stroke();

                    // Direction arrows on field lines
                    var angleOffset = time * (currentUp ? 1 : -1);
                    var arrowCount = 4;
                    for (var a = 0; a < arrowCount; a++) {
                        var angle = (a * Math.PI * 2 / arrowCount) + angleOffset;
                        var ax = cx + radius * Math.cos(angle);
                        var ay = cy + radius * Math.sin(angle);

                        // Arrow direction
                        var arrowAngle = currentUp ? angle + Math.PI/2 : angle - Math.PI/2;
                        var arrowSize = 8;

                        ctx.save();
                        ctx.translate(ax, ay);
                        ctx.rotate(arrowAngle);
                        ctx.fillStyle = 'rgba(99, 102, 241, 0.7)';
                        ctx.beginPath();
                        ctx.moveTo(arrowSize, 0);
                        ctx.lineTo(-arrowSize/2, -arrowSize/2);
                        ctx.lineTo(-arrowSize/2, arrowSize/2);
                        ctx.closePath();
                        ctx.fill();
                        ctx.restore();
                    }
                }
            }

            // Distance indicator
            var probeDist = distanceR * 8;
            ctx.strokeStyle = '#f59e0b';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(cx + wireRadius, cy);
            ctx.lineTo(cx + probeDist, cy);
            ctx.stroke();
            ctx.setLineDash([]);

            // Distance label
            ctx.fillStyle = '#f59e0b';
            ctx.font = 'bold 12px Space Grotesk';
            ctx.fillText('r = ' + distanceR + ' cm', cx + probeDist/2, cy - 15);

            // Measurement point
            ctx.beginPath();
            ctx.arc(cx + probeDist, cy, 6, 0, Math.PI * 2);
            ctx.fillStyle = '#f59e0b';
            ctx.fill();

            // Update displays
            document.getElementById('vizResult').textContent = 'B = ' + B.toExponential(1) + ' T';
            document.getElementById('infoB').textContent = B.toExponential(1) + ' T';
            document.getElementById('infoDirection').textContent = currentUp ? 'Berlawanan Jarum Jam' : 'Searah Jarum Jam';
            document.getElementById('infoMu').textContent = '4π×10⁻⁷ T·m/A';
            document.getElementById('infoStatus').textContent = currentI > 0 ? 'Aktif' : 'Tidak Ada Arus';
        }

        function drawLorentzVisualization(w, h) {
            var cx = w / 2;
            var cy = h / 2;

            var q = chargeQ * 1.6e-19;
            var v = velocityV * 1e6;
            var B = bFieldB * 0.1;
            var F = q * v * B;

            // Draw B field region
            ctx.fillStyle = 'rgba(99, 102, 241, 0.05)';
            ctx.fillRect(50, 50, w - 100, h - 100);

            // B field indicators (dots for into page)
            for (var x = 70; x < w - 70; x += 40) {
                for (var y = 70; y < h - 70; y += 40) {
                    ctx.fillStyle = 'rgba(99, 102, 241, 0.3)';
                    ctx.beginPath();
                    ctx.arc(x, y, 3, 0, Math.PI * 2);
                    ctx.fill();
                }
            }

            // B field label
            ctx.fillStyle = '#6366f1';
            ctx.font = 'bold 14px Space Grotesk';
            ctx.fillText('B (masuk layar)', w - 100, 40);

            // Particle
            var particleRadius = 12;
            
            // Particle trail
            var trailLength = 8;
            for (var t = trailLength; t >= 0; t--) {
                var trailX = cx - t * 15 - 60;
                var trailY = cy;
                ctx.beginPath();
                ctx.arc(trailX, trailY, particleRadius * (1 - t/trailLength * 0.5), 0, Math.PI * 2);
                ctx.fillStyle = isPositive 
                    ? 'rgba(220, 38, 38, ' + (0.1 + t/trailLength * 0.2) + ')' 
                    : 'rgba(37, 99, 235, ' + (0.1 + t/trailLength * 0.2) + ')';
                ctx.fill();
            }

            // Main particle
            ctx.beginPath();
            ctx.arc(cx - 60, cy, particleRadius, 0, Math.PI * 2);
            ctx.fillStyle = isPositive ? '#dc2626' : '#2563eb';
            ctx.fill();

            // Particle label
            ctx.fillStyle = 'white';
            ctx.font = 'bold 12px Space Grotesk';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(isPositive ? '+' : '-', cx - 60, cy);

            // Velocity vector
            var vArrowLen = 50;
            drawArrow(ctx, cx - 60, cy, cx - 60 + vArrowLen, cy, '#059669', 'v');

            // Force vector (perpendicular to v)
            if (B > 0 && v > 0) {
                var fArrowLen = Math.min(F * 5e13, 80);
                var fDirection = isPositive ? -1 : 1;
                drawArrow(ctx, cx - 60, cy, cx - 60, cy + fDirection * fArrowLen, '#dc2626', 'F');
            }

            // Update displays
            document.getElementById('vizResult').textContent = 'F = ' + F.toExponential(1) + ' N';
            document.getElementById('infoB').textContent = B.toFixed(2) + ' T';
            document.getElementById('infoDirection').textContent = isPositive ? 'Ke Atas' : 'Ke Bawah';
            document.getElementById('infoMu').textContent = 'q = ' + q.toExponential(1) + ' C';
            document.getElementById('infoStatus').textContent = 'v = ' + v.toExponential(0) + ' m/s';
        }

        function drawInductionVisualization(w, h) {
            var cx = w / 2;
            var cy = h / 2;

            var N = turnsN;
            var omega = omegaW;
            var A = areaA * 0.01;
            var B = inductionB * 0.1;

            var emfMax = N * B * A * omega;
            var emf = emfMax * Math.sin(omega * time);

            // Draw magnetic field region
            ctx.fillStyle = 'rgba(99, 102, 241, 0.08)';
            ctx.fillRect(50, 80, w - 100, h - 200);

            // B field arrows
            ctx.strokeStyle = '#6366f1';
            ctx.lineWidth = 2;
            for (var x = 80; x < w - 80; x += 60) {
                drawArrow(ctx, x, 60, x, h - 100, '#6366f1', '');
            }

            ctx.fillStyle = '#6366f1';
            ctx.font = 'bold 12px Space Grotesk';
            ctx.textAlign = 'center';
            ctx.fillText('B', 60, 50);

            // Rotating coil
            var coilWidth = 80;
            var coilHeight = 60;
            var angle = omega * time;

            ctx.save();
            ctx.translate(cx, cy);
            ctx.rotate(angle);

            // Coil
            ctx.strokeStyle = '#0d9488';
            ctx.lineWidth = 4;
            ctx.strokeRect(-coilWidth/2, -coilHeight/2, coilWidth, coilHeight);

            // Coil fill
            ctx.fillStyle = 'rgba(13, 148, 136, 0.2)';
            ctx.fillRect(-coilWidth/2, -coilHeight/2, coilWidth, coilHeight);

            ctx.restore();

            // Rotation axis
            ctx.strokeStyle = '#f59e0b';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(cx - 100, cy);
            ctx.lineTo(cx + 100, cy);
            ctx.stroke();
            ctx.setLineDash([]);

            // EMF graph
            var graphY = h - 70;
            var graphHeight = 40;
            ctx.strokeStyle = '#dc2626';
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (var gx = 50; gx < w - 50; gx++) {
                var graphAngle = omega * (time - (w - 50 - gx) * 0.02);
                var graphValue = Math.sin(graphAngle);
                var gy = graphY - graphValue * graphHeight/2;
                if (gx === 50) {
                    ctx.moveTo(gx, gy);
                } else {
                    ctx.lineTo(gx, gy);
                }
            }
            ctx.stroke();

            // Graph axis
            ctx.strokeStyle = '#9ca3af';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(50, graphY);
            ctx.lineTo(w - 50, graphY);
            ctx.stroke();

            ctx.fillStyle = '#6b7280';
            ctx.font = '10px Plus Jakarta Sans';
            ctx.textAlign = 'left';
            ctx.fillText('EMF', 55, graphY - graphHeight/2 - 5);

            // Update displays
            document.getElementById('vizResult').textContent = 'EMF = ' + emf.toExponential(2) + ' V';
            document.getElementById('infoB').textContent = B.toFixed(2) + ' T';
            document.getElementById('infoDirection').textContent = 'EMF max = ' + emfMax.toExponential(2) + ' V';
            document.getElementById('infoMu').textContent = 'N = ' + N;
            document.getElementById('infoStatus').textContent = 'ω = ' + omega + ' rad/s';
        }

        function drawArrow(ctx, fromX, fromY, toX, toY, color, label) {
            var headLen = 10;
            var dx = toX - fromX;
            var dy = toY - fromY;
            var angle = Math.atan2(dy, dx);
            var length = Math.sqrt(dx * dx + dy * dy);

            if (length < 1) return;

            ctx.strokeStyle = color;
            ctx.fillStyle = color;
            ctx.lineWidth = 2;

            ctx.beginPath();
            ctx.moveTo(fromX, fromY);
            ctx.lineTo(toX, toY);
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(toX, toY);
            ctx.lineTo(toX - headLen * Math.cos(angle - Math.PI/6), toY - headLen * Math.sin(angle - Math.PI/6));
            ctx.lineTo(toX - headLen * Math.cos(angle + Math.PI/6), toY - headLen * Math.sin(angle + Math.PI/6));
            ctx.closePath();
            ctx.fill();

            if (label) {
                ctx.font = 'bold 11px Space Grotesk';
                ctx.textAlign = 'center';
                ctx.fillText(label, (fromX + toX)/2, fromY - 10);
            }
        }

        function updateInfoDisplay() {
            // Info is updated within each draw function
        }

        // ========================================
        // Quiz System
        // ========================================
        function initQuiz() {
            var generateBtn = document.getElementById('generateBtn');
            var retryBtn = document.getElementById('retryBtn');

            if (generateBtn) generateBtn.addEventListener('click', generateQuiz);
            if (retryBtn) retryBtn.addEventListener('click', generateQuiz);

            generateQuiz();
        }

        function shuffleArray(array) {
            var newArray = array.slice();
            for (var i = newArray.length - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                var temp = newArray[i];
                newArray[i] = newArray[j];
                newArray[j] = temp;
            }
            return newArray;
        }

        function generateQuiz() {
            currentQuestions = shuffleArray(questionBank).slice(0, 5);
            userAnswers = new Array(5).fill(null);
            score = 0;
            quizSubmitted = false;

            document.getElementById('scoreDisplay').textContent = '0/5';
            document.getElementById('resultCard').classList.remove('show');

            renderQuiz();
        }

        function renderQuiz() {
            var container = document.getElementById('quizContainer');
            container.innerHTML = '';

            currentQuestions.forEach(function(q, qIndex) {
                var card = document.createElement('div');
                card.className = 'question-card';
                card.id = 'question-' + qIndex;

                var questionTitle = document.createElement('p');
                questionTitle.className = 'question-text';
                questionTitle.innerHTML = '<span class="question-number">' + (qIndex + 1) + '</span>' + q.question;
                card.appendChild(questionTitle);

                var optionsList = document.createElement('div');
                optionsList.className = 'options-list';

                var letters = ['A', 'B', 'C', 'D'];
                q.options.forEach(function(opt, oIndex) {
                    var btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerHTML = '<span class="option-letter">' + letters[oIndex] + '</span><span class="option-text">' + opt + '</span>';
                    btn.addEventListener('click', function() {
                        selectOption(qIndex, oIndex);
                    });
                    optionsList.appendChild(btn);
                });

                card.appendChild(optionsList);

                var feedback = document.createElement('div');
                feedback.className = 'feedback-box';
                feedback.id = 'feedback-' + qIndex;
                card.appendChild(feedback);

                container.appendChild(card);
            });
        }

        function selectOption(qIndex, oIndex) {
            if (quizSubmitted) return;

            userAnswers[qIndex] = oIndex;

            var questionCard = document.getElementById('question-' + qIndex);
            var options = questionCard.querySelectorAll('.option-btn');

            options.forEach(function(opt, idx) {
                opt.classList.remove('selected');
                if (idx === oIndex) opt.classList.add('selected');
            });

            if (userAnswers.indexOf(null) === -1) {
                submitQuiz();
            }
        }

        function submitQuiz() {
            quizSubmitted = true;
            score = 0;

            currentQuestions.forEach(function(q, qIndex) {
                var questionCard = document.getElementById('question-' + qIndex);
                var options = questionCard.querySelectorAll('.option-btn');
                var feedback = document.getElementById('feedback-' + qIndex);
                var userAnswer = userAnswers[qIndex];
                var correctAnswer = q.correct;

                options.forEach(function(opt, idx) {
                    opt.classList.add('disabled');
                    opt.classList.remove('selected');

                    if (idx === correctAnswer) opt.classList.add('correct');
                    else if (idx === userAnswer && userAnswer !== correctAnswer) opt.classList.add('incorrect');
                });

                if (userAnswer === correctAnswer) {
                    score++;
                    questionCard.classList.add('correct');
                    feedback.className = 'feedback-box show correct';
                    feedback.textContent = 'Benar! ' + q.explanation;
                } else {
                    questionCard.classList.add('incorrect');
                    feedback.className = 'feedback-box show incorrect';
                    feedback.textContent = 'Salah. ' + q.explanation;
                }
            });

            document.getElementById('scoreDisplay').textContent = score + '/5';
            document.getElementById('finalScore').textContent = score + '/5';

            var resultMessage = document.getElementById('resultMessage');
            if (score === 5) {
                resultMessage.textContent = 'Sempurna! Anda menguasai materi dengan sangat baik!';
            } else if (score >= 3) {
                resultMessage.textContent = 'Bagus! Terus tingkatkan pemahaman Anda.';
            } else {
                resultMessage.textContent = 'Pelajari kembali materi dan coba lagi!';
            }

            document.getElementById('resultCard').classList.add('show');
        }

        // ========================================
        // Animations
        // ========================================
        function initAnimations() {
            var observer = new IntersectionObserver(function(entries) {
                entries.forEach(function(entry) {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.module-card').forEach(function(card) {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                card.style.transition = 'opacity 0.4s ease, transform 0.4s ease';
                observer.observe(card);
            });
        }
    </script>
</body>
</html>
